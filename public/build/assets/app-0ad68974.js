import{a as V}from"./app-b480cc72.js";import{s as M,a as O,b as T,_ as G,H as W,F as q,r as d,o as l,c as i,d as t,e as r,w as a,f as n,g as p,h as f,i as _,t as m,j as g,T as S,n as v,k as P,p as D,l as Z,m as J,q as K,u as Q,v as X}from"./error-27ad8a3d.js";const Y=""+new URL("circle-add-acab8e6f.svg",import.meta.url).href,ee=""+new URL("circle-remove-9936ee64.svg",import.meta.url).href,te=""+new URL("c0-9708a3ec.jpg",import.meta.url).href,oe=""+new URL("c1-1ff255b8.jpg",import.meta.url).href,se=""+new URL("c2-f8e51564.jpg",import.meta.url).href,re=""+new URL("c3-f3ae555a.jpg",import.meta.url).href,ae=""+new URL("c4-6b73097a.jpg",import.meta.url).href,le=""+new URL("c5-febc674a.jpg",import.meta.url).href,ie=""+new URL("c6-b4e3ec19.jpg",import.meta.url).href,k={data:{roles:[{id:0,name:"村人",img:te,num:0},{id:1,name:"人狼",img:oe,num:0},{id:2,name:"狩人",img:se,num:0},{id:3,name:"占い師",img:re,num:0},{id:4,name:"霊媒師",img:ae,num:0},{id:5,name:"裏切者",img:le,num:0},{id:6,name:"神",img:ie,num:0}],btnAdd:Y,btnRemove:ee,se:{Success:new Audio(M),Error:new Audio(O),Push:new Audio(T)}},methods:{getAssetPath(e){return new URL(Object.assign({})[`../assets/${e}`],self.location).href}}};const ne={components:{Header:W,Footer:q},data:()=>({isLoading:!0,modeView:0,rooms:[],playersOnRoom:[],errors:[],form:{selection:{sex:["male","fmale"],imgs:[1,2,3,4,5,6,7,8,9]},player:{id:0,roomid:0,sex:"male",imgSelected:0,img:0,name:"",workidSelected:0,workid:0,pass1:"",pass2:"",color:"white"}},create:{flg:!1,form:{step:0,roomName:"",roles:k.data.roles,btnAdd:k.data.btnAdd,btnRemove:k.data.btnRemove},error:""},se:k.data.se}),created:function(){this.loadRooms()},mounted(){window.onload=()=>{}},methods:{loadRooms(){this.isLoading=!0,this.modeView=0,this.form.player.roomid=0,this.errors=[],V.get("./api/v1/room/getAll",this.param).then(e=>{this.isLoading=!1;try{e.data.error!=null?this.errors=e.data.error.errorInfo:e.data.rooms!=null?this.rooms=e.data.rooms:this.errors="特定できないエラー"}catch(s){this.errors=s}}).catch(e=>{console.log(e)})},entryRoom(e){this.playersOnRoom=e.players,this.form.player.roomid=e.room.id,this.modeView=1},playGame(e){e.name==""?(e.sex="male",e.img=0,e.pass="",this.form.player=e,this.modeView=2):location.href="./play/"+e.id},checkName(){this.errors=[],this.form.player.name==""?this.errors.push("名前を入力してください。"):this.form.player.name.length>5&&this.errors.push("お名前は5文字以内にしてください。")},makePlayer(){this.checkName(),this.form.player.pass==""&&this.errors.push("パスワードを入力してください。"),this.errors.length==0&&(this.form.player.img=this.form.selection.imgs[this.form.player.imgSelected],this.form.player.workid=this.form.selection.works[this.form.player.workidSelected].id,V.post("./api/v1/player/create",this.form.player).then(e=>{try{e.data.player!=null?(this.form.player=e.data.player,this.form.player.roomid=0,this.modeView=3):e.data.error!=null?this.errors=e.data.error.errorInfo:this.errors="特定できないエラー"}catch(s){this.errors=s}}).catch(e=>{console.log(e)}))},checkCreateRoom(){this.changeNum(this.create.form.roles[0],0),this.create.error==""&&(this.create.form.roomName==""?this.create.error="部屋名を入力してください。":this.checkMaxLength(this.create.form.roomName)||(this.create.error="15文字以内で入力ください"),this.create.form.roles.forEach(e=>{e.id==1&&e.num==0&&(this.create.error="人狼は1人以上設定してください")})),this.create.error==""?this.create.form.step=2:this.se.Error.play()},createRoom(){this.create.form.step=3,V.post("./api/v1/room/create",{params:this.create.form}).then(e=>{e.data.code==0?(this.create.form.step=4,this.se.Success.play()):(this.create.form.step=2,this.create.error=e.data.error,this.se.Error.play())}).catch(e=>{this.create.error=e.message,this.create.form.step=2,this.se.Error.play()})},changeNum(e,s){this.se.Push.play(),(s>0||e.num!=0)&&(e.num+=s);const w=this.countNum();w.peaple<=w.jinro?this.create.error="村人側は人狼側より多くする必要があります。":this.create.error=""},countNum(){let e={};return e.peaple=0,e.jinro=0,this.create.form.roles.forEach(s=>{s.id==1||s.id==5?e.jinro+=s.num:e.peaple+=s.num}),e},getAssetPath(e){return new URL("../../"+e,import.meta.url).href},checkString(e){var s=/^[a-zA-Z0-9_]*$/;return s.test(e)},checkMaxLength(e){var s=!1;return e.length<=15?s=!0:s=!1,s}}},c=e=>(D("data-v-b5a7a36e"),e=e(),Z(),e),de={style:{"max-width":"1024px",margin:"0 auto"}},me={id:"header"},ce={style:{"margin-top":"10px"}},ue={style:{float:"left"}},he={style:{float:"right"}},pe={key:0,style:{"border-radius":"5px",padding:"5px","background-color":"lightgreen",color:"white"}},fe=c(()=>t("br",{style:{clear:"left"}},null,-1)),_e={key:1},ge={key:0,style:{margin:"10px"}},ve={key:0},ye={style:{float:"left"}},ke=["src"],we={style:{float:"left"}},be={key:1},Ce={style:{float:"left"}},Re=["src"],Ve=c(()=>t("div",{style:{float:"left"}}," プレイヤー未作成 ",-1)),Se={style:{float:"right"}},Le={key:0},Ne={key:1},Ae=c(()=>t("br",{style:{clear:"left"}},null,-1)),Ue={key:0,style:{margin:"10px"}},Ie=c(()=>t("div",null," プレイヤーの設定をしてください。 ",-1)),Pe={style:{float:"left",margin:"5px"}},$e={style:{float:"left",margin:"5px"}},je=c(()=>t("br",{style:{clear:"both"}},null,-1)),xe=c(()=>t("div",{style:{margin:"10px"}}," アバターアイコンを選択してください。 ",-1)),He={style:{width:"100%",height:"50%","max-height":"300px","text-align":"center"}},Ee=["src"],Be=c(()=>t("div",{style:{margin:"10px"}}," 仕事を選んで下さい。 ",-1)),Fe={style:{float:"left"}},ze=["src"],Me={style:{float:"left"}},Oe={class:"text-h4"},Te={style:{clear:"left","margin-left":"10px"}},Ge=c(()=>t("div",null,"生活水準",-1)),We={style:{"margin-left":"10px"}},qe=c(()=>t("div",{style:{"maring-top":"10px"}},null,-1)),De={style:{"text-align":"center",margin:"auto"}},Ze={key:0},Je=["src"],Ke={class:"error"},Qe={style:{"text-align":"center"}},Xe={style:{margin:"0 auto",width:"min(80vw, 600px)"}},Ye={style:{float:"left"}},et={class:"num"},tt=["src","onClick"],ot=["src","onClick"],st={class:"name"},rt=c(()=>t("br",{style:{clear:"left"}},null,-1)),at={class:"error"},lt=c(()=>t("div",null," これでいいですか？ ",-1)),it={style:{"text-align":"center"}},nt={style:{margin:"0 auto",width:"min(80vw, 600px)"}},dt={style:{float:"left"}},mt={class:"num"},ct={class:"name"},ut=c(()=>t("br",{style:{clear:"left"}},null,-1)),ht={class:"error"},pt=c(()=>t("div",null,"部屋ができました！",-1)),ft=c(()=>t("div",null,"ボタンを押して、作った部屋でプレイヤーを設定しましょう。",-1));function _t(e,s,w,yt,kt,h){const j=d("Header"),u=d("v-btn"),L=d("v-col"),b=d("v-row"),x=d("v-progress-circular"),N=d("v-container"),C=d("v-text-field"),A=d("v-spacer"),H=d("v-select"),U=d("v-carousel-item"),I=d("v-carousel"),R=d("v-card"),E=d("v-card-title"),B=d("v-card-text"),F=d("v-card-actions"),z=d("Footer");return l(),i("div",de,[t("div",me,[r(j)]),r(R,{style:{"text-align":"center"}},{default:a(()=>[t("div",{class:v([e.create.form.step==0?"scaleShow":"scaleHide"])},[t("div",ce,[r(u,{color:"purple darken-4",onClick:s[0]||(s[0]=o=>{e.se.Push.play(),h.loadRooms()})},{default:a(()=>[n(" 部屋再読み込み ")]),_:1}),r(u,{color:"purple darken-4",onClick:s[1]||(s[1]=o=>{e.se.Push.play(),e.create.flg=1,e.create.form.step=1})},{default:a(()=>[n(" 部屋を作成する ")]),_:1})]),r(N,null,{default:a(()=>[e.isLoading?g("",!0):(l(!0),i(p,{key:0},f(e.rooms,o=>(l(),_(b,{key:e.id},{default:a(()=>[r(L,{style:{padding:"10px","border-bottom":"solid thin gray"}},{default:a(()=>[t("div",ue,m(o.room.name),1),t("div",he,[this.form.player.roomid==o.room.id?(l(),i("span",pe," 入室中 ")):(l(),_(u,{key:1,onClick:y=>h.entryRoom(o)},{default:a(()=>[n("入室")]),_:2},1032,["onClick"]))]),fe]),_:2},1024)]),_:2},1024))),128)),e.isLoading?(l(),i("div",_e,[r(x,{color:"blue-lighten-3","model-value":"20",size:77}),n(" loading data... ")])):g("",!0)]),_:1}),r(S,{name:"fade"},{default:a(()=>[e.modeView==1?(l(),i("div",ge,[r(N,null,{default:a(()=>[r(b,{style:{margin:"0 10"}},{default:a(()=>[n(" プレイするプレイヤーを選んでください。 ")]),_:1}),(l(!0),i(p,null,f(e.playersOnRoom,o=>(l(),_(b,{key:e.id},{default:a(()=>[r(L,{style:{"border-bottom":"solid thin lightgray",padding:"10px"}},{default:a(()=>[o.name!=""?(l(),i("div",ve,[t("div",ye,[t("img",{src:"./image/avatar/"+o.sex+"/icon0"+o.img+".png",class:"rounded-circle",Width:"30",Height:"30"},null,8,ke)]),t("div",we,m(o.name)+"  ",1)])):(l(),i("div",be,[t("div",Ce,[t("img",{src:this.getAssetPath("image/avatar/random.png"),class:"rounded-circle",Width:"30",Height:"30"},null,8,Re)]),Ve])),t("div",Se,[r(u,{onClick:y=>h.playGame(o)},{default:a(()=>[o.name!=""?(l(),i("span",Le," 参加 ")):(l(),i("span",Ne," プレイヤー作成 "))]),_:2},1032,["onClick"])]),Ae]),_:2},1024)]),_:2},1024))),128))]),_:1})])):g("",!0)]),_:1}),r(S,{name:"fade"},{default:a(()=>[e.modeView==2?(l(),i("div",Ue,[Ie,r(C,{label:"お名前",modelValue:this.form.player.name,"onUpdate:modelValue":s[2]||(s[2]=o=>this.form.player.name=o),onChange:h.checkName,placeholder:"お名前を入力してください。"},null,8,["modelValue","onChange"]),r(C,{label:"パスワード",type:"password",modelValue:this.form.player.pass,"onUpdate:modelValue":s[3]||(s[3]=o=>this.form.player.pass=o),hint:"Enter your password to access this website"},null,8,["modelValue"]),(l(),i(p,null,f(10,o=>t("div",Pe,[r(u,{onClick:y=>this.form.player.pass+=o%10+""},{default:a(()=>[n(m(o%10),1)]),_:2},1032,["onClick"])])),64)),r(A),t("div",$e,[r(u,{onClick:s[4]||(s[4]=o=>this.form.player.pass="")},{default:a(()=>[n("Clear")]),_:1})]),je,r(H,{label:"性別",modelValue:e.form.player.sex,"onUpdate:modelValue":s[5]||(s[5]=o=>e.form.player.sex=o),items:e.form.selection.sex},null,8,["modelValue","items"]),xe,t("div",He,[r(I,{continuous:!1,modelValue:e.form.player.imgSelected,"onUpdate:modelValue":s[6]||(s[6]=o=>e.form.player.imgSelected=o),width:"200",height:"200",class:"rounded-circle","hide-delimiters":""},{default:a(()=>[(l(!0),i(p,null,f(e.form.selection.imgs,o=>(l(),_(U,{contain:""},{default:a(()=>[t("img",{src:"./image/avatar/"+e.form.player.sex+"/icon0"+o+".png",class:"rounded-circle"},null,8,Ee)]),_:2},1024))),256))]),_:1},8,["modelValue"])]),Be,r(I,{continuous:!1,modelValue:e.form.player.workidSelected,"onUpdate:modelValue":s[7]||(s[7]=o=>e.form.player.workidSelected=o),"show-arrows":"true","hide-delimiters":"",height:"200",width:"400"},{default:a(()=>[(l(!0),i(p,null,f(e.form.selection.works,o=>(l(),_(U,{key:e.id,style:{"text-align":"center","background-color":"red"}},{default:a(()=>[r(R,{outlined:"",shaped:"",style:{width:"300px",padding:"10px",margin:"0 auto"}},{default:a(()=>[t("div",Fe,[t("img",{width:"45",height:"45",class:"rounded-circle",src:"./image/work/"+o.img+".png"},null,8,ze)]),t("div",Me,[t("div",Oe,m(o.type),1)]),t("div",Te,[t("div",null," 給料："+m(o.salary),1),Ge,t("ul",We,[t("li",null," 最低："+m(o.lifelevelMin),1),t("li",null," 最高："+m(o.lifelevelMax),1)])])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"]),qe,t("div",De,[r(u,{class:"text-h4",elevation:"30",height:"60",rounded:"",color:"deep-purple darken-1",onClick:s[8]||(s[8]=o=>h.makePlayer())},{default:a(()=>[n("これで決まり！！")]),_:1})])])):g("",!0)]),_:1}),r(S,{name:"fade"},{default:a(()=>[e.modeView==3?(l(),i("div",Ze,[r(R,null,{default:a(()=>[r(E,{color:"primary",dark:""},{default:a(()=>[n(" プレイヤー作成完了 ")]),_:1}),r(B,null,{default:a(()=>[t("img",{src:"./image/avatar/"+e.form.player.sex+"/icon0"+e.form.player.img+".png",class:"rounded-circle"},null,8,Je),t("div",null,m(this.form.player.name)+"さん、ようこそ！ ",1)]),_:1}),r(F,null,{default:a(()=>[r(A),r(u,{onClick:s[9]||(s[9]=o=>h.playGame(this.form.player))},{default:a(()=>[n(" ゲームに参加 ")]),_:1})]),_:1})]),_:1})])):g("",!0)]),_:1}),t("ul",Ke,[(l(!0),i(p,null,f(this.errors,o=>(l(),i("li",null,m(o),1))),256))])],2),t("div",{class:v(["step",[e.create.form.step==1?"scaleShow":"scaleHide"]])},[n(" ゲームルームの設定をしてください。 "),t("div",null,[r(C,{id:"roomName",label:"部屋名",modelValue:e.create.form.roomName,"onUpdate:modelValue":s[10]||(s[10]=o=>e.create.form.roomName=o),placeholder:"部屋名を入力してください"},null,8,["modelValue"])]),t("div",Qe,[n(" 各役割の人数を設定してください。 "),(l(!0),i(p,null,f(this.create.form.roles,o=>(l(),i("div",Xe,[t("div",Ye,[t("div",{class:"role",style:P({backgroundImage:`url('${o.img}')`})},[t("div",et,m(o.num),1),t("img",{class:"btnRemove",src:this.create.form.btnRemove,onClick:y=>h.changeNum(o,-1)},null,8,tt),t("img",{class:"btnAdd",src:this.create.form.btnAdd,onClick:y=>h.changeNum(o,1)},null,8,ot),t("div",st,m(o.name),1)],4)])]))),256))]),rt,t("div",at,m(e.create.error),1),t("div",null,[r(u,{color:"purple darken-4",onClick:s[11]||(s[11]=o=>{e.se.Push.play(),e.create.form.step=0,this.loadRooms()})},{default:a(()=>[n(" 戻る ")]),_:1}),r(u,{color:"purple darken-4",onClick:s[12]||(s[12]=o=>{e.se.Push.play(),this.checkCreateRoom()})},{default:a(()=>[n(" 次へ ")]),_:1})])],2),t("div",{class:v(["step",[e.create.form.step==2?"scaleShow":"scaleHide"]])},[lt,t("div",null,"部屋名:"+m(e.create.form.roomName),1),t("div",it,[(l(!0),i(p,null,f(this.create.form.roles,o=>(l(),i("div",nt,[t("div",dt,[t("div",{class:"role",style:P({backgroundImage:`url('${o.img}')`})},[t("div",mt,m(o.num),1),t("div",ct,m(o.name),1)],4)])]))),256))]),ut,t("div",ht,m(e.create.error),1),t("div",null,[r(u,{color:"purple darken-4",onClick:s[13]||(s[13]=o=>{e.se.Push.play(),e.create.form.step=1})},{default:a(()=>[n(" 考え直す ")]),_:1}),r(u,{color:"purple darken-4",onClick:s[14]||(s[14]=o=>{e.se.Push.play(),h.createRoom()})},{default:a(()=>[n(" 部屋を作成 ")]),_:1})])],2),t("div",{class:v(["step",[e.create.form.step==3?"scaleShow":"scaleHide"]])}," 部屋作ってます。ちょっと待ってね。。 ",2),t("div",{class:v(["step",[e.create.form.step==4?"scaleShow":"scaleHide"]])},[pt,ft,r(u,{color:"purple darken-4",onClick:s[15]||(s[15]=o=>{e.se.Push.play(),e.create.flg=0,this.loadRooms()})},{default:a(()=>[n(" 部屋一覧を表示する ")]),_:1})],2)]),_:1}),t("footer",null,[r(z)])])}const gt=G(ne,[["render",_t],["__scopeId","data-v-b5a7a36e"]]),$=J(gt),vt=K({components:Q,directives:X,theme:{defaultTheme:"dark"}});$.use(vt);$.mount("#app");
